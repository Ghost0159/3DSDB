<!DOCTYPE html>
<html>
   <head>
      <title>3dsdb</title>
      <style>
            th, td, p
            {
                font:14px Verdana;
            }
            table, th, td 
            {
                border: solid 1px #DDD;
                border-collapse: collapse;
                padding: 4px 4px;
                width:70%; 
                margin-left:15%; 
                margin-right:15%;
                text-align: center;
            }
            th 
            {
                font-weight:bold;
                background-color: skyblue;
                color: white;
            }
            #input 
            {
                font-size: 16px;
                width: 70%;
                margin-left: 15%;
                margin-right: 15%;
                padding-bottom: 5px;
                padding-top:5px;
            }
            tr:hover {background-color: #f5f5f5;}
        </style>
        <script>
            function GetJSON(path, region)
            {
                var t0 = performance.now();
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function()
                {
                    if (xhr.readyState === XMLHttpRequest.DONE) 
                    {
                        if (xhr.status === 200) 
                        {
                            var t1 = performance.now();
                            console.log("http call took " + (t1 - t0) + " milliseconds.");
                            var text = JSON.parse(xhr.responseText);
                            // EXTRACT VALUE FOR HTML HEADER.
                            var col = [];
                            for (var i = 0; i < text.length; i++) 
                            {
                                for (var key in text[i]) 
                                {
                                    if (col.indexOf(key) === -1) 
                                    {
                                        col.push(key);
                                    }
                                }
                            }
                            col.push('Region')

                            // CREATE DYNAMIC TABLE.
                            var table = document.getElementById("titleTable");

                            // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

                            var tr = table.insertRow(-1);                   // TABLE ROW.
                                   
                            // ADD JSON DATA TO THE TABLE AS ROWS.
                            for (var i = 0; i < text.length; i++) 
                            {
                                tr = table.insertRow(-1);
                                for (var j = 0; j < col.length - 1; j++) 
                                {
                                    var tabCell = tr.insertCell(-1);
                                    tabCell.innerHTML = text[i][col[j]];
                                }
                                var regionCell = tr.insertCell(-1);
                                regionCell.innerHTML = region;
                             }

                            var t2 = performance.now();
                            console.log("conversion call took " + (t2 - t1) + " milliseconds.")
                        } 
                    }
                };
                xhr.open("GET", path, true);
                xhr.send();
            }
            
            // Thnx https://stackoverflow.com/a/48246008
            function searchTable()
            {
                // Declare variables 
                var input, filter, table, tr, td, i;
                input = document.getElementById("input");
                filter = input.value.toUpperCase();
                table = document.getElementById("titleTable");
                tr = table.getElementsByTagName("tr");
                // Loop through all table rows, and hide those who don't match the search query
                for (i = 0; i < tr.length; i++) 
                {
                    td = tr[i].getElementsByTagName("td") ; 
                    for(j=0 ; j<td.length ; j++)
                    {
                        let tdata = td[j] ;
                        if (tdata) 
                        {
                            if (tdata.innerHTML.toUpperCase().indexOf(filter) > -1) 
                            {
                                tr[i].style.display = "";
                                break ; 
                            } 
                            else 
                            {
                                tr[i].style.display = "none";
                            }
                        } 
                    }
                }
            }
      </script>
   </head>

   <body>
        <h2>FAQ:</h2>
            Q) How big is 1 3ds block?
        <br>A) 1 3ds block = 128 kilobytes</br>
        <br>Q) What is the use of UID(s)?
        <br>A) UID(s) can be used to get more information regarding a title from Nintendo's ninja server.</br>
        <br>Q) What is the use of TitleID(s)?
        <br>A) You need the titleid for cases such as when you want to extract a title using GM9.</br>
        <input type="text" id="input" onkeyup="searchTable()" placeholder="Search ..">
        <table id="titleTable">
                <tr>
                    <th>Name</th>
                    <th>UID</th>
                    <th>TitleID</th>
                    <th>Size</th>
                    <th>Region</th>
                </tr>
        </table>
        <script>
            var regions = ['GB', 'US', 'JP', 'TW', 'KR'];
            var display_regions = ['Europe/Australia', 'USA', 'Japan', 'China', 'Korea']; 
            for(var i = 0; i < 5; i++)
                GetJSON('https://raw.githubusercontent.com/hax0kartik/3dsdb/master/jsons/list_' + regions[i] + '.json', display_regions[i]);
        </script>
   </body>

</html>